<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Hortifruti CEASA – Pedidos via WhatsApp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="./site/style.css">
</head>
<body>
  <i class="leaf-decoration leaf-1 fas fa-leaf"></i>
  <i class="leaf-decoration leaf-2 fas fa-leaf"></i>

  <!-- Modal de tipo de cliente -->
  <div id="clientTypeModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-card">
      <h2 class="modal-title">Como você deseja comprar?</h2>
      <p class="modal-subtitle">Escolha uma opção para personalizar os preços e o atendimento.</p>
      <div class="modal-actions">
        <button id="btnSouNovo" class="btn primary"><i class="fas fa-user-plus"></i> Sou novo</button>
        <button id="btnJaSouCliente" class="btn outline"><i class="fas fa-id-badge"></i> Já sou cliente</button>
      </div>
      <p class="modal-hint">
        <i class="fas fa-info-circle"></i>
        Clientes fidelizados visualizam os produtos <strong>sem preços</strong>; o valor é calculado pelo lojista.
      </p>
    </div>
  </div>

  <header class="header">
    <div class="container">
      <div class="brand">
        <span class="dot" aria-hidden="true"></span>
        <h1>Hortifruti CEASA</h1>
      </div>
      <div class="header-actions">
        <input id="searchInput" type="text" placeholder="Buscar..." />
        <select id="categoryFilter" title="Filtrar categoria">
          <option value="todas">Todas</option>
          <option value="Frutas">Frutas</option>
          <option value="Legumes">Legumes</option>
          <option value="Verduras">Verduras</option>
          <option value="Temperos">Temperos</option>
        </select>
        <button id="openCartBtn" class="btn pill">
          <span class="dot"></span>
          <i class="fas fa-shopping-cart"></i> <span id="cartCount">0</span>
        </button>
      </div>
    </div>
  </header>

  <main class="container">
    <p class="hint"><i class="fas fa-lightbulb"></i> Use vírgula ou ponto (ex: 1,5 kg)</p>
    <section id="catalog" class="grid"></section>
  </main>

  <!-- Drawer do carrinho -->
  <div id="cartDrawer" class="drawer" aria-hidden="true">
    <div class="drawer-content">
      <div class="drawer-header">
        <h2><i class="fas fa-shopping-basket"></i> Carrinho</h2>
        <button id="closeCartBtn" class="icon-btn" aria-label="Fechar">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="client-badge" id="clientBadge"></div>

      <div id="cartItems" class="cart-items"></div>

      <div class="cart-footer">
        <div class="totals" id="totalsBox">
          <div><strong>Itens:</strong> <span id="totalQty">0</span></div>
          <div><strong>Total:</strong> R$ <span id="totalPrice">0,00</span></div>
        </div>
        <div class="buyer-info">
          <input id="buyerName" type="text" placeholder="Seu nome (opcional)" />
          <textarea id="buyerNotes" rows="2" placeholder="Observações (ponto de entrega, horário)"></textarea>
        </div>
        <button id="checkoutBtn" class="btn primary">
          <i class="fab fa-whatsapp"></i> Enviar pedido
        </button>
        <small class="hint">Preços podem variar. Estoque sujeito à disponibilidade.</small>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="container small">
      <p>Atacado CEASA • Retirada no entreposto ou entrega</p>
    </div>
  </footer>

  <div id="toast" class="toast">
    <i class="fas fa-check-circle"></i>
    <span>Item adicionado ao carrinho</span>
  </div>
  <pre id="debug" hidden></pre>

  <!-- Incluir os scripts na ordem correta -->
  <script src="site/product.js"></script>
  <script src="site/cart.js"></script>
  <script src="site/app.js"></script>
</body>
</html>
